{"version":3,"sources":["firebase/config.js","comps/ProgressBar.js","hooks/useStorage.js","comps/FileUpload.js","comps/ImageList.js","hooks/useFireStore.js","comps/Modal.js","comps/Title.js","comps/Login.js","App.js","index.js"],"names":["fire","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","projectStorage","storage","projectFireStorage","firestore","timestamp","FieldValue","serverTimestamp","ProgressBar","file","setfile","useState","progress","setProgress","url","setUrl","error","setError","useEffect","console","log","storageRef","ref","name","collectionRef","collection","put","on","snap","percentage","bytesTransferred","totalBytes","err","a","getDownloadURL","createdAt","add","useStorage","motion","div","className","initial","width","animate","FileUpload","seterror","types","type","onChange","event","selected","target","files","includes","ImageList","setselectedImage","docs","setdocs","unsub","orderBy","onSnapshot","documents","forEach","doc","push","data","id","useFireStore","length","map","layout","whileHover","opacity","key","onClick","src","alt","Modal","selectedImage","classList","contains","img","y","Title","logoutUser","Login","user","setuser","email","setemail","password","setpassword","emailError","setemailError","pswdError","setpswdError","hasAccount","sethasAccount","auth","onAuthStateChanged","clearInputs","clearErrors","signOut","autoFocus","required","value","e","signInWithEmailAndPassword","catch","code","message","createUserWithEmailAndPassword","App","isUserAuthenticated","setisUserAuthenticated","authenticateUser","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.93b015e7.chunk.js","sourcesContent":["\r\n\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/storage';\r\nimport 'firebase/firestore';\r\nvar firebaseConfig = {\r\n    apiKey: \"AIzaSyCNrBmya6FfOYYSaLUj7Fk5Ibrc1fsoMX0\",\r\n    authDomain: \"instagallery-cda7e.firebaseapp.com\",\r\n    projectId: \"instagallery-cda7e\",\r\n    storageBucket: \"instagallery-cda7e.appspot.com\",\r\n    messagingSenderId: \"313606157282\",\r\n    appId: \"1:313606157282:web:119173092f39f48e0f3fbb\",\r\n    measurementId: \"G-30RG15K375\"\r\n  };\r\n  // Initialize Firebase\r\n  const fire= firebase.initializeApp(firebaseConfig);\r\n\r\n  const projectStorage= firebase.storage();\r\n  const projectFireStorage= firebase.firestore();\r\n  const timestamp = firebase.firestore.FieldValue.serverTimestamp;\r\n  export {fire,projectStorage,projectFireStorage,timestamp};\r\n\r\n\r\n","import React,{useEffect} from 'react'\r\nimport useStorage from '../hooks/useStorage'\r\nimport {motion} from 'framer-motion'\r\n\r\nexport default function ProgressBar({file,setfile}) {\r\n    const {url,progress}=useStorage(file,setfile);\r\n\r\n    //disable progress bar once we get the url \r\n    useEffect(() => {\r\n        if(url)\r\n        setfile(null)\r\n       \r\n    }, [url])\r\n    return (\r\n        <motion.div className=\"progress-bar\" \r\n        initial={{width: 0}}\r\n        animate={{width: progress + '%'}}>  \r\n        </motion.div>\r\n    )\r\n}\r\n","import React,{useState,useEffect} from 'react'\r\nimport { projectFireStorage, projectStorage, timestamp } from '../firebase/config'\r\n\r\nexport default function useStorage(file) {\r\n    const [progress, setProgress] = useState(0);\r\n    const [url, setUrl] = useState(null)\r\n    const [error, setError] = useState(null)\r\n\r\n    useEffect(() => {\r\n      // references\r\n\r\n      console.log(\"file\",file);\r\n      const storageRef = projectStorage.ref(file.name);//stores image file\r\n     const collectionRef=projectFireStorage.collection('images'); //collection of image urls\r\n      \r\n      storageRef.put(file).on('state_changed', (snap) => {\r\n        let percentage = (snap.bytesTransferred / snap.totalBytes) * 100;\r\n        setProgress(percentage);\r\n      }, (err) => {\r\n        setError(err);\r\n      }, async () => {\r\n        const url = await storageRef.getDownloadURL();\r\n        const createdAt= timestamp(); //to store the time of file upload \r\n        collectionRef.add({url,createdAt});\r\n        setUrl(url);\r\n      });\r\n    }, [file]);\r\n\r\n\r\n    return {progress,error,url}\r\n}\r\n","import React,{useState} from 'react'\r\nimport ProgressBar from './ProgressBar'\r\n\r\nexport default function FileUpload() {\r\n    const [file, setfile] = useState(null)\r\n    const [error, seterror] = useState(\"\")\r\n    const types=['image/png','image/jpeg','image/jpeg']\r\n\r\n\r\n    const changeFile = (event)=>{\r\n        let selected= event.target.files[0];\r\n        if(selected && types.includes(selected.type))\r\n        {\r\n            setfile(selected);\r\n            seterror(\"\");\r\n        }\r\n        else{\r\n            seterror(\"Please upload image file(png/jpg/jpeg)\");\r\n            setfile(null);\r\n        }\r\n    }\r\n    return (\r\n       <form className=\"uploadForm\">\r\n           <label>\r\n           <input type=\"file\" onChange={changeFile}/>\r\n           <span>+</span>\r\n           </label>\r\n           <div className=\"output\">\r\n           {error && <div className=\"error\">{error}</div>}\r\n           {file && <div>{file.name}</div>}\r\n           {file && <ProgressBar file={file} setfile={setfile}/>}\r\n           </div>\r\n       </form>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport useFireStore from '../hooks/useFireStore'\r\nimport {motion} from 'framer-motion'\r\n\r\nexport default function ImageList({setselectedImage}) {\r\n    const {docs}= useFireStore('images');\r\n    console.log(\"Docs\",docs);\r\n    return (\r\n        <div className=\"img-grid\">\r\n            {\r\n                docs && docs.length > 0 &&\r\n                docs.map(doc =>(\r\n                <motion.div  layout whileHover={{opacity: 1}} className=\"img-wrap\" key={doc.id} onClick={()=>setselectedImage(doc.url)}>\r\n                    <img src={doc.url} alt=\"No image found\" />\r\n                </motion.div>\r\n                ))\r\n            }\r\n        </div>\r\n    )\r\n}\r\n","import React,{useState,useEffect} from 'react'\r\nimport { projectFireStorage } from '../firebase/config'\r\n\r\nexport default function useFireStore(collection) {\r\n\r\n    //retrive the documents from specified firebase collections , order them based on created timestamp \r\n    // and set state. \r\n\r\n    const [docs, setdocs] = useState([])\r\n    useEffect(() => {\r\n        const unsub= projectFireStorage.collection(collection)\r\n        .orderBy('createdAt','desc')\r\n        .onSnapshot(snap =>{\r\n            let documents= [];\r\n            snap.forEach(doc =>{\r\n                documents.push({...doc.data(),id: doc.id})\r\n            });\r\n            setdocs(documents);\r\n        })\r\n        return ()=>{\r\n            unsub(); //unsubscribe on unmount\r\n        }\r\n    }, [collection])\r\n        \r\n    return {docs}\r\n}\r\n","import React from 'react'\r\nimport {motion} from 'framer-motion'    \r\nexport default function Modal({selectedImage,setselectedImage}) {\r\n\r\n    const handleOutsideClick= (event)=>{\r\n        //close only when user clicks on backdrop and not the image \r\n        if(event.target.classList.contains(\"backdrop\")) \r\n        setselectedImage(null);\r\n    }\r\n    return (\r\n        <div className=\"backdrop\" onClick={handleOutsideClick}>\r\n            <motion.img src={selectedImage} alt=\"\" \r\n            initial={{y: \"-100vh\"}}\r\n            animate={{y: 0}}\r\n            /> \r\n        </div>\r\n    )\r\n}\r\n","import React,{useEffect} from 'react';\nimport { fire } from '../firebase/config'\n\nconst Title = ({logoutUser}) => {\n\n\n  return (\n    <section className=\"navBar\">\n\n      <nav>\n        <h2>Insta Gallery</h2>\n        <button onClick={logoutUser}>Logout </button>\n      </nav>\n          {/*\n    <div className=\"title\">\n      <h1>InstaGallery</h1>\n      <h2>Your Pictures</h2>\n      <p>Welcome to the insta gallery</p>\n    </div>\n    */}\n    </section>\n\n    \n  )\n}\n\nexport default Title;","import { auth } from 'firebase'\r\nimport React,{useState,useEffect} from 'react'\r\nimport { fire } from '../firebase/config'\r\nimport '../login.css'\r\nimport FileUpload from './FileUpload'\r\nimport ImageList from './ImageList'\r\nimport Modal from './Modal'\r\nimport Title from './Title'\r\nexport default function Login() {\r\n\r\n    const [user, setuser] = useState('')\r\n    const [email, setemail] = useState('')\r\n    const [password, setpassword] = useState('')\r\n    const [emailError, setemailError] = useState('')\r\n    const [pswdError, setpswdError] = useState('')\r\n    const [hasAccount, sethasAccount] = useState(false)\r\n    const [selectedImage, setselectedImage] = useState(null)\r\n\r\n    const handleLogin = ()=>{\r\n        clearErrors();\r\n        fire\r\n        .auth()\r\n        .signInWithEmailAndPassword(email,password)\r\n        .catch((err)=>{\r\n            switch (err.code) {\r\n                case 'auth/invalid-email':\r\n                case 'auth/user-disabled':\r\n                case 'auth/user-not-found':    \r\n                   setemailError(err.message);\r\n                   break;\r\n                case 'auth/invalid-password':\r\n                    setpswdError(err.message);\r\n                    break;\r\n               \r\n            }\r\n        })\r\n    }\r\n\r\n    const handleSignup = ()=>{\r\n\r\n        clearErrors();\r\n\r\n        fire\r\n        .auth()\r\n        .createUserWithEmailAndPassword(email,password)\r\n        .catch((err)=>{\r\n            switch (err.code) {\r\n                case 'auth/email-already-in-use':\r\n                case 'auth/invalid-email': \r\n                   setemailError(err.message);\r\n                   break;\r\n                case 'auth/weak-password':\r\n                    setpswdError(err.message);\r\n                    break;\r\n               \r\n            }\r\n        })\r\n    }\r\n    const handlelogout = ()=>{\r\n        fire\r\n        .auth()\r\n        .signOut();\r\n    }\r\n    const authListner = ()=>{\r\n        fire.auth().onAuthStateChanged(\r\n            user =>\r\n            {\r\n                if(user){\r\n                setuser(user);\r\n                clearInputs();\r\n                }\r\n                else\r\n                setuser('');\r\n            }\r\n        )\r\n    }\r\n    useEffect(() => {\r\n       authListner();\r\n    }, [])\r\n\r\n    const clearInputs = ()=>{\r\n        setemail('');\r\n        setpassword('');\r\n    }\r\n    const clearErrors = ()=>{\r\n        setemailError('');\r\n        setpswdError('');\r\n    }\r\n    \r\n    return (\r\n        <div>\r\n            { user ?\r\n      \r\n      <>\r\n      <Title logoutUser={handlelogout} />\r\n      <FileUpload/>\r\n      <ImageList setselectedImage={setselectedImage}/>\r\n      {selectedImage && <Modal selectedImage={selectedImage} setselectedImage={setselectedImage}/>}\r\n      </>\r\n      :\r\n            <section className=\"login\">\r\n                <div className=\"loginContainer\">\r\n                    <label>Username</label>\r\n                    <input type=\"text\" autoFocus required value={email} onChange={e=>setemail(e.target.value)} />\r\n                    <p className=\"error Msg\">{emailError}</p>\r\n\r\n                    <label>Password</label>\r\n                    <input type=\"password\" autoFocus required value={password} onChange={e=>setpassword(e.target.value)} />\r\n                    <p className=\"error Msg\">{pswdError}</p>\r\n                    <div className=\"btnContainer\">\r\n                        {hasAccount ?\r\n                        <>\r\n                        <button onClick={handleLogin} >Sign in</button>\r\n                        <p>Don't have an account? <span onClick={()=>sethasAccount(!hasAccount)}>Sign up </span></p>\r\n                        </>\r\n                        :\r\n                        <>\r\n                        <button onClick={handleSignup}>Sign up</button>\r\n                        <p>Have an account?  <span onClick={()=>sethasAccount(!hasAccount)}>Sign in </span></p>\r\n                        </>\r\n                       }\r\n                    </div>\r\n                </div>\r\n            </section>\r\n}\r\n        </div>\r\n    )\r\n}\r\n","import React,{useState} from 'react';\nimport FileUpload from './comps/FileUpload';\nimport ImageList from './comps/ImageList';\nimport Login from './comps/Login';\nimport Modal from './comps/Modal';\nimport Title from './comps/Title';\n\nfunction App() {\n\n  const [isUserAuthenticated, setisUserAuthenticated] = useState(false);\n  const [selectedImage, setselectedImage] = useState(null)\n\n  return (\n    <div className=\"App\">\n      {isUserAuthenticated ?\n      <>\n      <Title authenticateUser={()=>setisUserAuthenticated(false)}/>\n      <FileUpload/>\n      <ImageList setselectedImage={setselectedImage}/>\n      {selectedImage && <Modal selectedImage={selectedImage} setselectedImage={setselectedImage}/>}\n      </>\n      :\n      <Login  authenticateUser={()=>setisUserAuthenticated(true)} />\n      }\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA"],"sourceRoot":""}