(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{22:function(e,t,a){e.exports=a(41)},27:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),l=a.n(r),s=(a(27),a(3)),u=a(13),i=a.n(u),o=a(21),m=a(10),d=a.n(m),f=(a(29),a(30),d.a.initializeApp({apiKey:"AIzaSyCNrBmya6FfOYYSaLUj7Fk5Ibrc1fsoMX0",authDomain:"instagallery-cda7e.firebaseapp.com",projectId:"instagallery-cda7e",storageBucket:"instagallery-cda7e.appspot.com",messagingSenderId:"313606157282",appId:"1:313606157282:web:119173092f39f48e0f3fbb",measurementId:"G-30RG15K375"})),g=d.a.storage(),p=d.a.firestore(),b=d.a.firestore.FieldValue.serverTimestamp;var E=a(43);function v(e){var t=e.file,a=e.setfile,r=function(e){var t=Object(n.useState)(0),a=Object(s.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(null),u=Object(s.a)(l,2),m=u[0],d=u[1],f=Object(n.useState)(null),E=Object(s.a)(f,2),v=E[0],j=E[1];return Object(n.useEffect)((function(){console.log("file",e);var t=g.ref(e.name),a=p.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;r(t)}),(function(e){j(e)}),Object(o.a)(i.a.mark((function e(){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:n=e.sent,c=b(),a.add({url:n,createdAt:c}),d(n);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:c,error:v,url:m}}(t),l=r.url,u=r.progress;return Object(n.useEffect)((function(){l&&a(null)}),[l]),c.a.createElement(E.a.div,{className:"progress-bar",initial:{width:0},animate:{width:u+"%"}})}function j(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),i=u[0],o=u[1],m=["image/png","image/jpeg","image/jpeg"];return c.a.createElement("form",{className:"uploadForm"},c.a.createElement("label",null,c.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&m.includes(t.type)?(r(t),o("")):(o("Please upload image file(png/jpg/jpeg)"),r(null))}}),c.a.createElement("span",null,"+")),c.a.createElement("div",{className:"output"},i&&c.a.createElement("div",{className:"error"},i),a&&c.a.createElement("div",null,a.name),a&&c.a.createElement(v,{file:a,setfile:r})))}var h=a(14);function O(e){var t=e.setselectedImage,a=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){var t=p.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(h.a)(Object(h.a)({},e.data()),{},{id:e.id}))})),r(t)}));return function(){t()}}),[e]),{docs:c}}("images").docs;return console.log("Docs",a),c.a.createElement("div",{className:"img-grid"},a&&a.length>0&&a.map((function(e){return c.a.createElement(E.a.div,{layout:!0,whileHover:{opacity:1},className:"img-wrap",key:e.id,onClick:function(){return t(e.url)}},c.a.createElement("img",{src:e.url,alt:"No image found"}))})))}a(32),a(40);function S(e){var t=e.selectedImage,a=e.setselectedImage;return c.a.createElement("div",{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&a(null)}},c.a.createElement(E.a.img,{src:t,alt:"",initial:{y:"-100vh"},animate:{y:0}}))}var y=function(e){var t=e.logoutUser;return c.a.createElement("section",{className:"navBar"},c.a.createElement("nav",null,c.a.createElement("h2",null,"Insta Gallery"),c.a.createElement("button",{onClick:t},"Logout ")))};function w(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(""),u=Object(s.a)(l,2),i=u[0],o=u[1],m=Object(n.useState)(""),d=Object(s.a)(m,2),g=d[0],p=d[1],b=Object(n.useState)(""),E=Object(s.a)(b,2),v=E[0],h=E[1],w=Object(n.useState)(""),k=Object(s.a)(w,2),I=k[0],N=k[1],C=Object(n.useState)(!1),F=Object(s.a)(C,2),A=F[0],U=F[1],B=Object(n.useState)(null),x=Object(s.a)(B,2),D=x[0],L=x[1];Object(n.useEffect)((function(){f.auth().onAuthStateChanged((function(e){e?(r(e),M()):r("")}))}),[]);var M=function(){o(""),p("")},P=function(){h(""),N("")};return c.a.createElement("div",null,a?c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{logoutUser:function(){f.auth().signOut()}}),c.a.createElement(j,null),c.a.createElement(O,{setselectedImage:L}),D&&c.a.createElement(S,{selectedImage:D,setselectedImage:L})):c.a.createElement("section",{className:"login"},c.a.createElement("div",{className:"loginContainer"},c.a.createElement("label",null,"Username"),c.a.createElement("input",{type:"text",autoFocus:!0,required:!0,value:i,onChange:function(e){return o(e.target.value)}}),c.a.createElement("p",{className:"error Msg"},v),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",autoFocus:!0,required:!0,value:g,onChange:function(e){return p(e.target.value)}}),c.a.createElement("p",{className:"error Msg"},I),c.a.createElement("div",{className:"btnContainer"},A?c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:function(){P(),f.auth().signInWithEmailAndPassword(i,g).catch((function(e){switch(e.code){case"auth/invalid-email":case"auth/user-disabled":case"auth/user-not-found":h(e.message);break;case"auth/invalid-password":N(e.message)}}))}},"Sign in"),c.a.createElement("p",null,"Don't have an account? ",c.a.createElement("span",{onClick:function(){return U(!A)}},"Sign up "))):c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:function(){P(),f.auth().createUserWithEmailAndPassword(i,g).catch((function(e){switch(e.code){case"auth/email-already-in-use":case"auth/invalid-email":h(e.message);break;case"auth/weak-password":N(e.message)}}))}},"Sign up"),c.a.createElement("p",null,"Have an account?  ",c.a.createElement("span",{onClick:function(){return U(!A)}},"Sign in ")))))))}var k=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(null),u=Object(s.a)(l,2),i=u[0],o=u[1];return c.a.createElement("div",{className:"App"},a?c.a.createElement(c.a.Fragment,null,c.a.createElement(y,{authenticateUser:function(){return r(!1)}}),c.a.createElement(j,null),c.a.createElement(O,{setselectedImage:o}),i&&c.a.createElement(S,{selectedImage:i,setselectedImage:o})):c.a.createElement(w,{authenticateUser:function(){return r(!0)}}))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(k,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.93b015e7.chunk.js.map